# Makefile
#
# Generated by phxrpc_pb2server from mqttconsumer.proto
#
#

include ../../../makefile.mk

SVR_OBJS = mqtt_handler.o \
		mqttconsumer_main.o

all: mqttconsumer_main

mqttconsumer_main: $(SVR_OBJS)
	$(LINKER) $^ -L$(PHXQUEUE_LIB_DIR) -L$(PHXRPC_LIB_DIR) -lphxrpc  -L../../../lib/ \
			-lphxqueue_phxrpc_logic_mqtt -lphxqueue_phxrpc_consumer -lphxqueue_phxrpc_producer \
			-lmqttbroker_client -lscheduler_client -lstore_client \
			-llock_client -lphxqueue_phxrpc_plugin -lphxqueue_phxrpc_comm \
			-lphxqueue_consumer -lphxqueue_producer -lphxqueue_config \
			-lphxqueue_comm -lphxqueue_plugin $(LDFLAGS) -o $@

%.o: %.cpp
	$(CXX) $(CXXFLAGS) -o $@ -c $< -I$(GLOG_INCLUDE_DIR) -I$(PROTOBUF_INCLUDE_DIR) \
			-I$(LEVELDB_INCLUDE_DIR) -I$(LIBCO_INCLUDE_DIR) -I$(PHXRPC_INCLUDE_DIR) \
			-I$(PHXPAXOS_INCLUDE_DIR) -I$(PHXPAXOS_PLUGIN_INCLUDE_DIR) -I$(PHXQUEUE_INCLUDE_DIR)

clean:
	@($(RM) $(TARGETS))
	@($(RM) *.o)
	@($(RM) *.pb.*)

